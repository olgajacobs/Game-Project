(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{_u:()=>y,XN:()=>b,Ig:()=>h});const t="start",n="game",i="defeat",s="close",a="open",r="begin",c="cards",o="game";function l(e){const t=document.getElementById("wrapper");let n='  <header>\n        <div class="time">\n        <section class="timeset"><p class="min">min</><p class="sek">sek</p></section>\n        <section><span id="timerid" class="game-timer">00.00</span></section>\n        </div>\n        <div class="back-counter"></div>\n        <div class="start-button">Старт</div>\n    </header>';n+='<div class="memory-game">',n+=e.map(((e,t)=>function(e,t){return`<div class="memory-card" id=${t}> \n        <img src="./assets/cards/${e.status===s?"99":e.id}.png" alt="card" \n        class=${e.status===s?"card_back":"card_front"}></div>`}(e,t))).join(""),n+="</div>",t.innerHTML=n}let d,u,m;function p(e){switch(e){case r:l(y),function(){const e=document.querySelector(".start-button");e.classList.add("pointer"),e.onclick=function(){!function(){const e=document.querySelector(".start-button");e.onclick="",e.classList.remove("pointer")}(),p(c)}}();break;case c:v(y,c),l(y),f(5);break;case o:v(y,o),l(y),function(e){const t=document.querySelectorAll(".memory-card");for(let n of t)99!==e[n.id].id&&n.classList.add("pointer"),n.onclick=function(){if(99!==e[n.id].id){e[n.id].status=a;const t=document.getElementById(n.id);t.classList.remove("pointer");for(const i of t.children)i.setAttribute("src",`./assets/cards/${e[n.id].id}.png`);b.firstCard?(b.firstCard===e[n.id].id?1===b.cardsNeedToOpen?(clearInterval(d),h("win")):b.cardsNeedToOpen-=1:(clearInterval(d),h(i)),b.firstCard=null):b.firstCard=e[n.id].id,n.onclick=""}}}(y),f();break;default:alert("Ошибка в playGame")}}function v(e,t){t===c?e.forEach(((e,t)=>99===e.id?e.status=s:e.status=a)):e.forEach(((e,t)=>e.status=s))}const f=e=>{const t=document.getElementById("timerid");if(e){t.innerHTML=`00:0${e}`;let n=e;const i=setInterval((()=>{n-=1,t.innerHTML=`00.0${n}`}),1e3);setTimeout((()=>{clearInterval(i),p(o)}),1e3*e)}else b.timeStart=Date.now(),d=setInterval((()=>{const e=(Date.now()-b.timeStart)/1e3;u=Math.floor(e/60),m=Math.floor(e%60),m<10&&(m="0"+m),u<10&&(u="0"+u),b.timeString=u+"."+m,t.innerHTML=u+"."+m}),1e3)};const b={level:1,firstCard:null,cardsNeedToOpen:0,timeStart:0,timeString:"00.00"},g=[6,12,18];let y=[];const h=e=>{switch(e){case t:document.getElementById("wrapper").innerHTML='\n            <div class="main">\n                <h3 class="main-title">Выбери сложность</h3>\n                <div class="radio-group">\n                    <input id="radio_1" type="radio" name="radio" value="1">\n                    <label for="radio_1">1</label>\n\n                    <input id="radio_2" type="radio" name="radio" value="2">\n                    <label for="radio_2">2</label>\n                \n                    <input id="radio_3" type="radio" name="radio" value="3">\n                    <label for="radio_3">3</label>\n                </div>\n                <button class="start-button">Старт</button>\n            </div>\n        ',document.querySelector(".radio-group").addEventListener("click",(()=>{const e=document.querySelectorAll('input[type="radio"]');for(let t of e)if(t.checked){b.level=t.value;const e=document.querySelector(".start-button").classList;return void(e.contains("pointer")||e.add("pointer"))}})),document.querySelector(".start-button").addEventListener("click",(()=>{0!==b.level&&(b.timeStart=new Date,h(n))}));break;case n:b.cardsNeedToOpen=g[b.level-1],y=w(g[b.level-1]),p(r);break;case"win":b.cardsNeedToOpen=g[b.level-1],y=w(g[b.level-1]),function(){v(y,c),l(y);const e=document.getElementById("wrapper");let t=e.innerHTML+`\n            <div class="win-main">\n                <div class="win-smile"> <img src="./assets/images/win.png" alt="win" class='win-mark'></div>\n                    <h3 class="win-title">Вы выиграли</h3>\n                    <h4 class="spended-time-title">Затраченное время:</h4>\n\n                    <div class="spended-time">\n                        <section><span id="timerid" class="game-timer">${b.timeString}</span></section>\n                    </div>\n                    <button class="restart-button pointer">Играть снова</button>\n            </div>\n        `;e.innerHTML=t}(),document.querySelector(".restart-button").addEventListener("click",(()=>{b.level=0,b.timeStart=null,h(t)}));break;case i:!function(){v(y,c),l(y);const e=document.getElementById("wrapper");let t=e.innerHTML+`\n            <div class="win-main">\n                <div class="win-smile"> <img src="./assets/images/lose.png" alt="win" class='win-mark'></div>\n                    <h3 class="win-title">Вы проиграли</h3>\n                    <h4 class="spended-time-title">Затраченное время:</h4>\n\n                    <div class="spended-time">\n                        <section><span id="timerid" class="game-timer">${b.timeString}</span></section>\n                    </div>\n                    <button class="restart-button pointer">Играть снова</button>\n            </div>\n        `;e.innerHTML=t}(),document.querySelector(".restart-button").addEventListener("click",(()=>{b.level=0,b.timeStart=null,h(t)}))}},w=e=>{const t=[];let n=[];for(let e=0;e<36;e++)n[e]=e;k(n),n=n.slice(0,e),n=[...n,...n],k(n);for(let i=0;i<36;i++)t[i]={id:i<2*e?n[i]:99,status:s};return t},k=e=>{for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}};h(t)})();